@model List<DelightFoods_Live.Models.ApplicationUser>
@{
	Layout = "~/Views/Shared/_AdminLayout.cshtml";
	ViewData["Title"] = "Customers List";
}
<main id="main" class="main">

	<div class="pagetitle">
		<h1>Customers List</h1>
		<nav>
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a asp-action="AdminDashboard" asp-controller="Home">Home</a></li>
				<li class="breadcrumb-item">Customers List</li>
			</ol>
		</nav>
	</div>
	<section class="section">
		<div class="row">


			<div class="col-lg-12">
				<div class="card">
					<div class="card-body">

						<!-- Table with striped rows -->
						<div class="datatable-wrapper datatable-loading no-footer sortable searchable fixed-columns">

							<div class="datatable-container">
								<table class="table datatable datatable-table">
									<thead>
										<tr>
											<th data-sortable="true" aria-sort="ascending" class="datatable-ascending">
												<button class="datatable-sorter">Code</button>
											</th>
											<th data-sortable="true" aria-sort="ascending" class="datatable-ascending">
												<button class="datatable-sorter">Name</button>
											</th>
											<th data-sortable="true" aria-sort="ascending" class="datatable-ascending">
												<button class="datatable-sorter">Email</button>
											</th>
											<th data-sortable="true" aria-sort="ascending" class="datatable-ascending">
												<button class="datatable-sorter">Status</button>
											</th>
											<th data-sortable="true" aria-sort="ascending" class="datatable-ascending">
												<button class="datatable-sorter">Action</button>
											</th>
										</tr>
									</thead>
									<tbody>
										@{
											int counter = 1; // Initialize counter
										}
										@foreach (var item in Model)
										{
											<tr>
												<td>
													<b>@($"CUST-{counter}")</b>
												</td>
												<td>
													@Html.DisplayFor(modelItem => item.FirstName) @Html.DisplayFor(modelItem => item.LastName)
												</td>
												<td>
													@Html.DisplayFor(modelItem => item.Email)
												</td>
												<td>
													<span class="badge bg-lightgreen">Active</span>
												</td>
												<td>
													<a asp-controller="Customer" asp-action="DetailByGUID" asp-route-id="@item.Id" class="btn btn-secondary">Details <i class="bi bi-info-square "></i></a>

												</td>
											</tr>
											counter++;
										}
									</tbody>
								</table>
							</div>
						</div>
						<!-- End Table with striped rows -->
					</div>
				</div>

			</div>
		</div>
	</section>
</main>
<style>
	.bg-lightgreen {
		background-color: lightgreen;
		color: darkgreen;
		padding: 5px;
		font: 16px;
		font-weight: 600;
		border-radius: 5px;
		width: 65px;
	}

	.bg-red {
		background-color: #FF474C;
		color: white;
		padding: 5px;
		font: 16px;
		font-weight: 600;
		width: 65px;
		border-radius: 5px;
	}
</style>

<script>

	$(document).ready(function () {
		$(".readyforship").click(function () {
			var id = $(this).data("id"); // Get the product ID from data attribute
			console.log('abc', id);

			$.ajax({
				type: 'POST',
				url: "@Url.Action("ReadyToShip", "SaleOrder")",
				data: { id: id },
				success: function (result) {
					if (result === "success") {
						// alert("Success");
						location.reload();
					} else {
						// alert("Error");
						console.log("Error");
					}
				},
				error: function () {
					// alert("Error in request");
					console.log("Error in request");
				}
			});
		});
	});

</script>
